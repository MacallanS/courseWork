{% extends '_base.html' %}


{% block content %}

    <table class="basket-table">
        <thead>
            <tr class="align-middle">
                <th scope="col">#</th>
                <th scope="col">Пользователи</th>
                <th scope="col">Позиции</th>
                <th scope="col">Итого</th>
                <th scope="col">Дата</th>
            </tr>
        </thead>
        <tbody>
            {% for basket_item in basket %}
            <tr class="align-middle">
                <th scope="row">{{ basket_item.id }}</th>
                <td>{{ basket_item.user }}</td>
                <td>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Детали</th>
                                <th>Кол-во</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for entry in basket_item.entries.all %}
                            <tr>
                                <td>{{ entry.product.name }}</td>
                                <td>{{ entry.quantity }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </td>
                <td>{{ basket_item.total_price }} руб</td>
                <td>{{ basket_item.add_datetime }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock content %}
